<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog</title>
    <link rel="stylesheet" href="/css/style.css" />
    <script src="/js/script.js"></script>
  </head>
  <body>
    <%- include("partials/header.ejs") %>
   
    <% if (success) { %>
      <div class="success-message">
       <%= success %>
          Success! Your post has been submitted.
      </div>
  <%} %>
    <h1 class="title-post">Welcome to the Blog</h1>

  
    <!-- <a class="link" href="/newpost">Create New Post</a> -->
    <ul >
      <% posts.forEach(post => { %>
      <li class="container">
        <h2 ><%= post.title %></h2>
        <p class="desc-post"><%= post.description %></p>
        <img
        src="<%= post.imageUrl %>"
        alt="<%= post.title %>"
        style="max-width: 300px"
          class="img-center"
        />
        <form action="/delete/<%= post.id %>" method="POST" enctype="multipart/form-data">
          <div class="blog-input">
          <button  type="submit" id="deleteBtn"
           class="button2" >Delete</button>
          <a  class="link" href="/edit/<%= post.id %>" >Edit</a>
        </div>
      
        </form>
      </li>
      <% }) %>
    </ul>


    <!-- Custom Confirmation Modal -->
<div id="confirmModal" class="modal">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <h2>Confirm Deletion</h2>
    <p>Are you sure you want to delete this post?</p>
    <div class="modal-buttons">
      <button id="confirmBtn" class="confirm">Confirm</button>
      <button id="cancelBtn" class="cancel">Cancel</button>
    </div>
  </div>
</div> 
    <%- include("partials/footer.ejs") %>

    <script>
const successMessage = document.querySelector('.success-message');
const subbtn =document.querySelector('.subbtn')

  successMessage.innerText = 'Post created successfully';
     successMessage.style.display = 'block'; // Show the message

     // Add fade-out effect after a few seconds
     setTimeout(() => {
       successMessage.style.display = 'none'; // Hide the message
     }, 3000); // Adjust the duration as needed
    </script>
  </body>
</html>
